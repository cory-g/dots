#!/bin/sh
#
# dotz-readme - 0.0.1 - May 29, 2019 @  7:34 am
# created: May 29, 2019 @  7:34 am by Cory G
# license: gpl-2.0
#
#       ██            ██                                              ██
#      ░██           ░██                                             ░██
#      ░██  ██████  ██████ ██████       ██████  █████   ██████       ░██
#   ██████ ██░░░░██░░░██░ ░░░░██  █████░░██░░█ ██░░░██ ░░░░░░██   ██████
#  ██░░░██░██   ░██  ░██     ██  ░░░░░  ░██ ░ ░███████  ███████  ██░░░██
# ░██  ░██░██   ░██  ░██    ██          ░██   ░██░░░░  ██░░░░██ ░██  ░██
# ░░██████░░██████   ░░██  ██████      ░███   ░░██████░░████████░░██████
#  ░░░░░░  ░░░░░░     ░░  ░░░░░░       ░░░     ░░░░░░  ░░░░░░░░  ░░░░░░
#
#
#  ██████████   █████
# ░░██░░██░░██ ██░░░██
#  ░██ ░██ ░██░███████
#  ░██ ░██ ░██░██░░░░
#  ███ ░██ ░██░░██████
# ░░░  ░░  ░░  ░░░░░░
#
# *******************************
# A script I've stupidly left with the default description and vaguely named dotz-readme
# ------------------------------------------
#
# contact
# -------
# << cory.gantenbein@protonmail.com >> || << https://coryg.me >>

RDMEFILE=$DOTSDIR/README.md
APPS_FILE="Packages.md"
rm $RDMEFILE

RDME1="# Arch .dotfiles

![Screenshot](scrot.png)

### Basics"

# window manager
LINE="$(wmctrl -m | head -n 1)"
WMNAME=${LINE#* }

# shell
PREFIX="/usr/bin/"
SHELL_RAW=$(echo "$SHELL" | grep -oP "^$PREFIX\K.*")
SHELL_VERSION=$(grep -F $SHELL_RAW $DOTSDIR/docs/$APPS_FILE)
SHELL_STRING=${SHELL_VERSION:2}

# terminal
TERM_VERSION=$(grep -F $TERM $DOTSDIR/docs/$APPS_FILE)
TERM_STRING=${TERM_VERSION:2}

RDME2="#### Notes

- \`~/.local/bin\` needs to be added to \`\$PATH\`
- install figlet fonts from [xero on github](https://github.com/xero/figlet-fonts)

#### Packages
Complete list of both AUR packages as well as Repo Packages is located [here](https://github.com/cory-g/dots/tree/master/docs/$APPS_FILE)."

echo "$RDME1" > $RDMEFILE
echo "- Window manager: $WMNAME" >> $RDMEFILE
echo "- Terminal: $TERM_STRING" >> $RDMEFILE
echo "- Shell: $SHELL_STRING" >> $RDMEFILE
echo "" >> $RDMEFILE
echo "$RDME2" >> $RDMEFILE
