#!/bin/sh
#
# displaytitle - 0.0.1 - June  4, 2019 @  9:09 am
# created: June  4, 2019 @  9:09 am by Cory G
# license: gpl-2.0
#
#     __ __             __             __   __ __   __
# .--|  |__.-----.-----|  .---.-.--.--|  |_|__|  |_|  .-----.
# |  _  |  |__ --|  _  |  |  _  |  |  |   _|  |   _|  |  -__|
# |_____|__|_____|   __|__|___._|___  |____|__|____|__|_____|
#                |__|           |_____|
#
# *******************************
# A script I've stupidly left with the default description and vaguely named displaytitle
# ------------------------------------------
#
# contact
# -------
# << cory.gantenbein@protonmail.com >> || << https://coryg.me >>

clipboarder(){
  echo "%{A3:echo '$1' | xclip -selection clipboard:}$1%{A}"
}

mode=$(i3var get pbtitlemode)

if [[ $1 = switch ]]; then

  if [[ $mode = advanced ]]; then
    i3var set pbtitlemode normal
    mode=normal
  else
    i3var set pbtitlemode advanced
    mode=advanced
  fi

fi

if [[ $mode = advanced ]]; then
  awc=$(i3get -r c)
  awi=$(i3get -r i)
  output="$(clipboarder "$awc")   ---    $(clipboarder "$awi")"
else
  awt=$(i3get -r t)
  output="$(clipboarder "$awt")"
fi



# echo "%{B#00FF00}%{F#FF00FF}string%{F-} anything%{B-}"


# echo "$awt"

# polybar-msg hook MODULENAME HOOKNUMBER
echo "%{A1:polybar-msg hook titlehook 3:}${output//\"/}%{A}"
